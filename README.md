# Email app ver+ tech fellowship

Email client, send messages and receive everything in your inbox.

## Tech Stack

**Client:** React, TailwindCSS

**Server:** Python, Django, Django Rest Framework

**Database:** Aws RDS postgreSQL instance

## Roadmap

- [x] Basic Email Sending and Receiving

  - Compose an email with a recipient, subject, and body.
  - Send an email to another user identified by their email address.
  - Recive emails from other users.

- [x] User Registration and Login System

- [ ] Email Organization
  - Create custom folders for organizing emails.
  - Move emails between the inbox and any created folders.

# Users

In the application the only fields required are the email and the password with which the user registers and then logs in.

| Fields   | Description                     |
| -------- | ------------------------------- |
| email    | User's unique mail address      |
| password | String of at least 8 characters |

### `mail/user` Register a user with e-mail and password<br>

Method **POST**
Response: 200 <br>
BodyParams:

```
{
    "email": "juan@gmail.com",
    "password": "somePassword"
}
```

### `mail/user/authentication/` Authtentica the user with email and password.<br>

Method **POST** Response: 200<br>
BodyParams:

```
{
    "email": "juan@gmail.com",
    "password": "somePassword"
}
```

# Mail

The email is the unique identifier of the user, an email has the following structure:
| Fields | Description |
| ------------- | ------------- |
| sender_email | Sender's email address |
| recipient_email | Receiver's mail |
| subject | Subject of the mail |
| message | Mail message |
| date | Autogenerated mail date |
| folder | Optional mail folder|

### `mail/received/email` Retrieve the emails that a user has received.<br>

Method **GET**<br>
Response:

```
[
    {
        "id": 1,
        "sender_email": "mendo6472@gmail.com",
        "recipient_email": "juan1010.jerm@gmail.com",
        "subject": "Ver+ tech fellow",
        "message": "Hola reciba un cordial ha sido aceptado",
        "date": "2024-03-01T00:08:38.596Z"
    }
]
```

### `mail/` Send an email with the message, the subject, and the email of who will receive it.<br>

Method **POST**
Response: 200 <br>
BodyParams:

```
{
    "sender_email": "juan1010.jerm@gmail.com",
    "receiver_email": "mendo6472@gmail.com",
    "subject": "Comunicacion de la iglesia",
    "content": "Hola reciba un cordial saludo del sacerdote de la iglesia ******"
}
```

### `mail/information/id` Retrieve email information by id.<br>

Method **GET**<br>
Response:

```
{
        "id": 1,
        "sender_email": "mendo6472@gmail.com",
        "recipient_email": "juan1010.jerm@gmail.com",
        "subject": "Ver+ tech fellow",
        "message": "Hola reciba un cordial ha sido aceptado",
        "date": "2024-03-01T00:08:38.596Z"
}
```

# Folder

Organize the email subject by folders, the folder is related to a single user.
| Fields | Description |
| ------------- | ------------- |
| name | Folder name|
| user | Unique user email|

### `mail/create_folder/` Create a folder to organize emails<br>

Method **GET**<br>
BodyParams:

```
{
    "folder_name": "spam",
    "user_email": "juan1010.jerm@gmail.com"
}
```

### `mail/save_mails/` Save emails in a specific folder<br>

Method **POST**<br>
Response: 200<br>
BodyParams:

```
{
    "emails":[
    {
        "id": 1,
        "sender_email": "mendo6472@gmail.com",
        "recipient_email": "juan1010.jerm@gmail.com",
        "subject": "Ver+ tech fellow",
        "message": "Hola reciba un cordial ha sido aceptado",
        "date": "2024-02-29T17:02:23.373Z"
    },
    {
        "id": 2,
        "sender_email": "mendo6472@gmail.com",
        "recipient_email": "juan1010.jerm@gmail.com",
        "subject": "Ver+ tech fellow",
        "message": "Hola reciba un cordial ha sido aceptado",
        "date": "2024-02-29T17:02:23.373Z"
    }
],
    "user_email": "juan1010.jerm@gmail.com",
    "folder_name": "spam"
}
```

## Authors

- [@Sergio Caro Layton](https://github.com/scarolayton)
- [@Robinson Brito](https://github.com/RABrL)
- [@Julian Mendoz](https://github.com/Mendo6472)
- [@Juan Esteban Rozo](https://github.com/JuanEstebanR)

# Code Review

**Milestone 2**

- [x] Github actions pipeline for testing in front and back. [Marlon](https://github.com/Marlondot)  ->   [PR #35](https://github.com/RABrL/mail-app-fellowship/pull/35)

  - Using the tests created by the HG6 we created a frontend pipeline that tests with jest 
  - Created a Backend pipeline that runs a temporal container for Postgres to better run the tests made by the legacy team. 
- [x] Testing and fixing some bugs. [David](https://github.com/imitelis)  ->  [PR#34](https://github.com/RABrL/mail-app-fellowship/pull/34),  [PR#36](https://github.com/RABrL/mail-app-fellowship/pull/36)  and  [PR#38](https://github.com/RABrL/mail-app-fellowship/pull/38)
      
    - Fixed CORS bug
    - Reimplemented and enlarged Jest tests
    - Configured .gitignore and .env files
    - Used gunicorn as WSGI production server
    - Created AWS infraestructure using Terraform
- [x] Session management. [Angel](https://github.com/AngelBrand1)  ->  [PR#37](https://github.com/RABrL/mail-app-fellowship/pull/37).
    
    - Change user session from localstorage to cookies.
    
        The user session management has been updated, transitioning from localStorage to cookies for security reasons. Cookies offer built-in security features such as HttpOnly and Secure, which help prevent attacks like XSS and CSRF. Additionally, since they are managed by the browser, attackers find it more challenging to access information compared to localStorage. Three functions have been created in /utils to handle cookies, replacing the previous usage of localStorage throughout. Furthermore, cookies now have an expiration time, adding an extra layer of protection to user data. This data storage practice is recommended for security purposes, leveraging secure cookie handling and expiration for additional protection.

    - New feature
    
        Sending real emails using SMTP.
- [x] Organize, refactor. [Carlos](https://github.com/forgionyc)  ->  [PR #33](https://github.com/RABrL/mail-app-fellowship/pull/33)
  - Refactored api calls to work with axios.
  - Added api-client making api calls easier to read.
  - Added emailCheck to remove clutter from the api calls
  - Moved all the interfaces code to the types folder, making the source code more organized.
